<h2 class="title">ğŸ“¦ Orders</h2>

@if (orders.length > 0) {
  <ul>
    @for (order of orders; track order.id) {
      <li class="order-item">
        <button (click)="toggleOrder(order.id)" class="order-header">
          <strong>Created At: {{ order.createdAt | date:'dd.MM.yyyy HH:mm' }}</strong> - 
          Total Price: {{ order.totalAmount }} â‚º -
          Updated At: {{ order.updatedAt | date:'dd.MM.yyyy HH:mm' }}
          <span>{{ isExpanded(order.id) ? 'â–²' : 'â–¼' }}</span>
        </button>
                
        @if (isExpanded(order.id)) {
          <ul class="order-items-list">
            @for (item of order.orderItems; track item.id) {
              <li class="order-item-card">
                <div class="item-header">
                  <span class="product-id">ğŸ“¦ {{ item.productName }}</span>

                  @switch (item.status) {
                    @case ('ORDERED') {
                      <span class="status status-ordered">ğŸ›’ Order Placed</span>
                    }
                    @case ('PREPARING') {
                      <span class="status status-shipped">ğŸ“¦ Preparing</span>
                    }
                    @case ('SHIPPED') {
                      <span class="status status-shipped">ğŸ“¦ Shipped</span>
                    }
                    @case ('DELIVERED') {
                      <span class="status status-delivered">âœ… Delivered</span>
                    }
                    @default {
                      <span class="status status-unknown">â“ Unknown</span>
                    }
                  }
                </div>

                <div class="item-details">
                  <div><strong>Quantity:</strong> {{ item.quantity }}</div>
                  <div><strong>Price:</strong> {{ item.unitPrice }} â‚º</div>
                  <div><strong>Category:</strong> {{ item.category }}</div>
                  <div><strong>Order Date:</strong> {{ item.orderDate | date: 'dd.MM.yyyy HH:mm' }}</div>
                </div>
              </li>
            }
          </ul>
        }

      </li>
    }
  </ul>
} @else {
  <div class="no-order-message">
    <p>ğŸ›’ There is no order.</p>
  </div>
}